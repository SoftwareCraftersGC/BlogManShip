<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="list-view.html">
<link rel="import" href="full-view.html">

<dom-module id="list-demo">
  <template>
    <style>
      :host {
        display: block;
        height: 80%;
      }
      neon-animated-pages {
        height: 100%;
      }
    </style>
    <iron-ajax
      auto
      url="/posts"
      handle-as="json"
      last-response="{{posts}}"></iron-ajax>
    <neon-animated-pages id="pages" selected="0">
      <list-view data="[[posts]]" on-item-click="_onItemClick"></list-view>
      <full-view id="postView" on-close="_onClose"></full-view>
    </neon-animated-pages>
  </template>

</dom-module>

<script>

  Polymer({

    is: 'list-demo',

    properties: {
      posts : Array
    },

    _onItemClick: function(event) {
        this.$.postView.post = event.detail.post;
      this.$.pages.selected = 1;
    },

    _onClose: function() {
      this.$.pages.selected = 0;
    }

  });

</script>
