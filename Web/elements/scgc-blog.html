<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="list-view.html">
<link rel="import" href="full-view.html">

<dom-module id="scgc-blog">
    <template>
    <style>
    :host {
        display: block;
    }

    paper-scroll-header-panel {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: var(--paper-grey-200, #eee);
      --paper-scroll-header-panel-full-header: {
        background-image: url(/images/background-logo.jpg);
      };
      --paper-scroll-header-panel-condensed-header: {
          background-image: url(/images/background-logo.jpg);
      };
    }

    paper-scroll-header-panel ::content::-webkit-scrollbar {
        display: none;
    }

    paper-toolbar {
      height: 192px;
      background-color: transparent;
      overflow: visible;
    }
    paper-icon-button {
      margin: 0 8px;
      --paper-icon-button-ink-color: white;
    }
    .bottom-text {
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
      font-size: 20px;
      padding-bottom: 10px;
    }
    .subtitle {
      padding-top: 4px;
      font-size: 16px;
      color: #ccc;
    }

    .content {
      padding: 16px 10px 16px 50px;
      height: 400%;
    }
    .indent {
      margin-left: 60px;
    }
    .spacer {
      @apply(--layout-flex);
    }

    </style>
    <iron-ajax
    auto
    url="/posts"
    handle-as="json"
    last-response="{{posts}}"></iron-ajax>
    <paper-scroll-header-panel condenses keep-condensed-header header-height="192" condensed-header-height="128">
        <paper-toolbar></paper-toolbar>

        <neon-animated-pages id="pages" class="content" selected="0">
            <list-view data="[[posts]]" on-item-click="_onItemClick"></list-view>
            <full-view id="postView" on-close="_onClose"></full-view>
        </neon-animated-pages>

    </paper-scroll-header-panel>
</template>

</dom-module>

<script>

Polymer({

    is: 'scgc-blog',

    properties: {
        posts : Array
    },

    attached: function () {

    },

    _onItemClick: function(event) {
        this.$.postView.post = event.detail.post;
        this.$.pages.selected = 1;
    },

    _onClose: function() {
        this.$.pages.selected = 0;
    }

});

</script>
