<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-styles/shadow.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/neon-animation/neon-animatable-behavior.html">

<dom-module id="full-view">
    <template>
    <style>
    :host {
        @apply(--layout-vertical);
    }

    .main {
        background: white;
        @apply(--layout-flex);
        @apply(--layout-scroll);
        @apply(--shadow-elevation-8dp);
        padding: 12px;
    }

    marked-element {
        position: relative;
        width: 100%;
        padding-bottom: 100%;
    }

    header {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--layout-justified);
    }
    </style>

    <div id="main" class="main">
        <header>
            <h1>[[post.title]]</h1>
            <paper-icon-button id="button" icon="clear" on-click="_onClearButtonClick"></paper-icon-button>
        </header>
        <marked-element markdown="[[post.content]]">
            <div class="markdown-html"></div>
        </marked-element>
    </div>

</template>
</dom-module>

<script>

Polymer({

    is: 'full-view',

    behaviors: [
        Polymer.NeonAnimatableBehavior
    ],

    properties: {
        post: Object,

        sharedElements: {
            type: Object,
            value: function() {
                return {
                    'hero': this.$.main
                };
            }
        },

        animationConfig: {
            type: Object,
            value: function() {
                return {
                    'entry': [{
                        name: 'fade-in-animation',
                        node: this.$.button
                    }, {
                        name: 'hero-animation',
                        id: 'hero',
                        toPage: this
                    }],

                    'exit': [{
                        name: 'fade-out-animation',
                        node: this.$.button
                    }, {
                        name: 'scale-down-animation',
                        node: this.$.main,
                        transformOrigin: '50% 50%',
                        axis: 'y'
                    }]

                }
            }
        }

    },

    _onClearButtonClick: function() {
        this.fire('close');
    }

});

</script>
